created: 20240708172321168
modified: 20240709191603605
tags: 
test: 1000000
title: ChatGPT Conversation
type: text/vnd.tiddlywiki

<$vars msg_id={{API Tracker!!msg_id_count}} conv_id={{API Tracker!!conv_id_count}}>

<$button tooltip="Archive chat">
Archive Chat
<$macrocall $name="archiveChat" promptValue={{API Tracker}}/>
</$button>

<$edit-text tiddler="$:/chatarchivist/OpenAIAPI/prompt" tag="input" placeholder="Enter text..."/>
<$button tooltip="Send message">
Send
<$macrocall $name="openaiTextGenerate" promptValue={{$:/chatarchivist/OpenAIAPI/prompt}}/>
<$action-sendmessage $message="tm-notify" $param="$:/chatarchivist/chatProgressNotify"/>
<$action-createtiddler 
$basetitle=<<msg_id>>
text={{$:/chatarchivist/OpenAIAPI/prompt}}
conversation_id=<<conv_id>>
message_id=<<msg_id>>
author="user" 
timestamp={{$:/chatarchivist/OpenAIAPI/prompt!!modified}}
tags="chatgptmessage"/>
<$action-setfield $tiddler="API Tracker" msg_id_count={{{[<msg_id>add[1]]}}} text={{$:/chatarchivist/OpenAIAPI/prompt}}/>
<$action-deletefield $tiddler="$:/chatarchivist/OpenAIAPI/prompt" $field="text"/>
</$button>

<$list filter="[tag[chatgptmessage]conversation_id<conv_id>sort[timestamp]]">
''<$view $tiddler=<<currentTiddler>> field="author" />:''<br>
<$view $tiddler=<<currentTiddler>> field="text" /><hr>
